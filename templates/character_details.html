<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ character.name }} - Solo Leveling Arise</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/characters.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/character_details.css') }}">
</head>
<body>
    {% include 'navbar.html' %}
    <div class="container">
        <h1>{{ character.name }}</h1>
        <p style="text-align: center; color: #ffcc00; font-weight: bold;">
            Type: {{ character.type }}
        </p>

        <!-- Conteneur pour l'image et les onglets -->
        <div class="character-info">
            <!-- Image du personnage -->
            <img src="{{ url_for('static', filename=character.image) }}" alt="{{ character.name }}">

            <!-- Conteneur des onglets et du contenu -->
            <div class="tabs-and-content">
                <!-- Système d'onglets -->
                <div class="tabs">
                    <div class="tab active" data-tab="passives">Passifs</div>
                    <div class="tab" data-tab="skills">Skills</div>
                    <div class="tab" data-tab="artefacts">Artefacts</div>
                </div>

                <!-- Contenu des onglets -->
                <div id="passives" class="tab-content active">
                    <h2>Passifs</h2>
                    {% if character.passives and character.passives|length > 0 %}
                        {% for passive in character.passives %}
                            <div class="passive" style="display: flex; align-items: flex-start; margin-bottom: 20px;">
                                {% if passive.image %}
                                    <img src="{{ url_for('static', filename=passive.image) }}" alt="{{ passive.name or 'Passive Image' }}" style="width: 50px; height: 50px; margin-right: 10px;">
                                {% endif %}
                                <div>
                                    {% if passive.name %}
                                        <strong>{{ passive.name }}</strong><br>
                                    {% endif %}
                                    <p>{{ passive.description|safe }}</p>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p>Informations sur les passifs du personnage.</p>
                    {% endif %}
                </div>
                <div id="skills" class="tab-content">
                    <h2>Skills</h2>
                    {% if character.skills and character.skills|length > 0 %}
                        {% for skill in character.skills %}
                            <div class="skill" style="display: flex; align-items: flex-start; margin-bottom: 20px;">
                                {% if skill.image %}
                                    <img src="{{ url_for('static', filename=skill.image) }}" alt="{{ skill.name or 'Skill Image' }}" style="width: 50px; height: 50px; margin-right: 10px;">
                                {% endif %}
                                <div>
                                    {% if skill.name %}
                                        <strong>{{ skill.name }}</strong><br>
                                    {% endif %}
                                    <p>{{ skill.description|safe }}</p>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p>Informations sur les skills du personnage.</p>
                    {% endif %}
                </div>
                <div id="artefacts" class="tab-content">
                    <h2>Artefacts</h2>
                    {% if character.artefacts and character.artefacts|length > 0 %}
                        <div class="artefacts-container" style="display: flex; justify-content: space-between;">
                            <!-- Colonne gauche -->
                            <div class="artefacts-column">
                                {% for artefact in character.artefacts[:4] %}
                                    <div class="artefact-item" style="display: flex; flex-direction: column; margin-bottom: 20px;">
                                        <p style="text-align: center; font-weight: bold;">{{ artefact.name }} : {{ artefact.set }}</p>
                                        <div style="display: flex; align-items: center;">
                                            <img src="{{ url_for('static', filename=artefact.image) }}" alt="{{ artefact.name }}" style="width: 100px; height: 100px; margin-right: 10px;">
                                            <div>
                                                <!-- Statistique principale -->
                                                <div class="stat-main">
                                                    <div class="stat-container">
                                                        <span>{{ artefact.main_stat.name }}</span>
                                                        <img src="{{ url_for('static', filename='images/Stats_Principale.png') }}" alt="Statistique Principale">
                                                    </div>
                                                </div>
                                                <!-- Statistiques secondaires -->
                                                <div class="stat-secondary-container">
                                                    {% for stat in artefact.secondary_stats %}
                                                        <div class="stat-secondary">
                                                            <div class="stat-container">
                                                                <span>{{ stat.name }}</span>
                                                                <img src="{{ url_for('static', filename='images/Stats_Secondaire.png') }}" alt="Statistique Secondaire">
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>

                            <!-- Colonne droite -->
                            <div class="artefacts-column">
                                {% for artefact in character.artefacts[4:] %}
                                    <div class="artefact-item" style="display: flex; flex-direction: column; margin-bottom: 20px;">
                                        <p style="text-align: center; font-weight: bold;">{{ artefact.name }} : {{ artefact.set }}</p>
                                        <div style="display: flex; align-items: center;">
                                            <img src="{{ url_for('static', filename=artefact.image) }}" alt="{{ artefact.name }}" style="width: 100px; height: 100px; margin-right: 10px;">
                                            <div>
                                                <!-- Statistique principale -->
                                                <div class="stat-main">
                                                    <div class="stat-container">
                                                        <span>{{ artefact.main_stat.name }}</span>
                                                        <img src="{{ url_for('static', filename='images/Stats_Principale.png') }}" alt="Statistique Principale">
                                                    </div>
                                                </div>
                                                <!-- Statistiques secondaires -->
                                                <div class="stat-secondary-container">
                                                    {% for stat in artefact.secondary_stats %}
                                                        <div class="stat-secondary">
                                                            <div class="stat-container">
                                                                <span>{{ stat.name }}</span>
                                                                <img src="{{ url_for('static', filename='images/Stats_Secondaire.png') }}" alt="Statistique Secondaire">
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    {% else %}
                        <p>Informations sur les artefacts du personnage.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <script>
        // Gestion des onglets
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Retirer la classe active de tous les onglets
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));

                // Ajouter la classe active à l'onglet cliqué et son contenu
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });
    </script>
</body>
</html>
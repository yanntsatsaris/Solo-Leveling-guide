<dialog id="edit-character-dialog" class="edit-character-overlay">
  <div id="edit-character-menu" class="edit-character-popup">
    <form id="edit-character-form" method="POST" action="{{ url_for('characters_admin.edit_character', char_id=character.id) }}">
      <h2 style="text-align: center; color: #ffcc00">Modifier le personnage</h2>
      <div class="edit-tabs">
        <div class="edit-tab active" data-tab="main">Infos principales</div>
        <div class="edit-tab" data-tab="passives">Passifs</div>
        <div class="edit-tab" data-tab="skills">Compétences</div>
        <div class="edit-tab" data-tab="weapons">Armes</div>
        <div class="edit-tab" data-tab="artefacts">Artefacts</div>
      </div>

      <!-- Contenu des onglets -->
      <div class="edit-tab-content active" id="edit-tab-main">
        <!-- ... (le contenu HTML des onglets reste le même) ... -->
      </div>
      <div class="edit-tab-content" id="edit-tab-passives">
          <!-- ... -->
      </div>
      <!-- ... (etc. pour tous les onglets) ... -->

      <div style="display: flex; justify-content: space-between; margin-top: 18px">
        <button type="submit" class="admin-btn">Enregistrer</button>
        <button type="button" id="close-edit-character" class="close-btn" style="font-size: 22px">&times;</button>
      </div>
    </form>
  </div>
</dialog>

<script>
    initializeEditModalData({
        panopliesList: {{ panoplies_list|tojson }},
        artefactMainStats: {
            "Casque": ["ATK", "ATK%", "DEF", "DEF%", "HP", "HP%"],
            "Plastron": ["DEF", "DEF%"],
            "Gants": ["ATK", "ATK%"],
            "Bottes": ["CRIT DMG", "DEF", "DEF%", "HP", "HP%"],
            "Collier": ["HP", "HP%"],
            "Bracelet": ["LIGHT DMG", "WATER DMG", "FIRE DMG", "WIND DMG", "DARK DMG"],
            "Bague": ["ATK", "ATK%", "DEF", "DEF%", "HP", "HP%"],
            "Boucle d'oreille": ["MP MAX"]
            // ... (etc. pour EN-en)
        },
        secondaryStatsOptions: ["ATK", "ATK%", "DEF", "DEF%", "HP", "HP%", "CRIT HIT", "CRIT DMG"],
        focusStatsOptions: ["ATK", "DEF", "HP", "CRIT HIT", "CRIT DMG"],
        coresList: {{ cores_list|tojson }},
        coreMainStats: { "01": ["ATK", "ATK%"], "02": ["DEF", "DEF%"], "03": ["HP", "HP%"] },
        coreSecondaryStats: { "01": ["CRIT HIT"], "02": ["CRIT DMG"], "03": ["DMG INC"] },
        artefactTypeLabels: {
            'FR-fr': ['Casque', 'Plastron', 'Gants', 'Bottes', 'Collier', 'Bracelet', 'Bague', "Boucle d'oreille"],
            'EN-en': ['Helmet', 'Chestplate', 'Gloves', 'Boots', 'Necklace', 'Bracelet', 'Ring', 'Earring']
        },
        currentLang: "{{ language if language is defined else 'FR-fr' }}"
    });
</script>
<script src="{{ url_for('static', filename='js/edit_character_modal.js') }}"></script>

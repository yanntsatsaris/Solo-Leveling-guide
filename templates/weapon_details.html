{% extends 'base.html' %}

{% block title %}{{ weapon.name }} - Solo Leveling Arise{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/weapon_details.css') }}" />
{% endblock %}

{% block content %}
    <div class="layout" style="background-image: url('{{ url_for('static', filename='images/Background/BG_' ~ weapon.type ~ '.webp') }}');">
        <div class="image-column">
            <div class="weapon-image">
                <img src="{{ url_for('static', filename=weapon.image) }}" alt="{{ weapon.name }}" />
            </div>
        </div>
        <div class="content-column">
            <div class="container">
                <h1>{{ weapon.name }}</h1>
                <div class="weapon-image">
                    <img src="{{ url_for('static', filename=weapon.image) }}" alt="{{ weapon.name }}" />
                </div>
                <div class="weapon-info">
                    <div class="tabs-and-content">
                        <div class="tabs">
                            <div class="tab active" data-tab="review">Review</div>
                            <div class="tab" data-tab="skills">Skills</div>
                        </div>
                        <div class="tab-content active" id="review">
                            <h2>Review</h2>
                            <p>{{ weapon.description|safe }}</p>
                            {% if weapon.evolutions and weapon.evolutions|length > 0 %}
                            <div class="weapon-evolutions">
                                <h3>Évolutions</h3>
                                <ul>
                                    {% for evolution in weapon.evolutions %}
                                    {% if evolution.range %}
                                    <li>
                                        <img src="{{ url_for('static', filename='images/Advancement/' + evolution.evolution_id + '.webp') }}" alt="{{ evolution.evolution_id }}" class="weapon-evolution-image weapon-evolution-range" />
                                        <span>{{ evolution.description|safe }}</span>
                                    </li>
                                    {% else %}
                                    <li>
                                        <img src="{{ url_for('static', filename='images/Advancement/' + evolution.evolution_id + '.webp') }}" alt="{{ evolution.evolution_id }}" class="weapon-evolution-image" />
                                        <span>{{ evolution.description|safe }}</span>
                                    </li>
                                    {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                            {% else %}
                            <p>Aucune évolution disponible pour cette arme.</p>
                            {% endif %}
                        </div>
                        <div class="tab-content" id="skills">
                            <h2>Skills</h2>
                            {% if weapon.skills %}
                            <ul>
                                {% for skill in weapon.skills %}
                                <li>
                                    <h3>{{ skill.name }}</h3>
                                    <img src="{{ url_for('static', filename=skill.image) }}" alt="{{ skill.name }}" />
                                    <p>{{ skill.description|safe }}</p>
                                </li>
                                {% endfor %}
                            </ul>
                            {% else %}
                            <p>No skills available for this weapon.</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
